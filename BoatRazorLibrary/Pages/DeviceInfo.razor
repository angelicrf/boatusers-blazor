@page "/deviceinfo"
@inject IJSRuntime js
@implements IAsyncDisposable

<h3>DeviceInfo</h3>

@*<Button Type="@ButtonType.Primary">Click</Button>*@

@if (IsMobile)
{
    <div class="m-auto">
        <DeviceMauiLocationComponent />
        @*<DatePicker TValue="DateTime?" Picker="@DatePickerType.Date" />*@
        <BluetoothDevicesInfo />
    </div>
}
else
{
//#if WINDOWS

<div class="m-auto">
    <BUDateSelectorComponent />
</div>
//#endif
}

@code
{

    private bool IsMobile { get; set; }

    private IJSObjectReference? funcModule;

    FuncDeviceInfo funcDvi = new FuncDeviceInfo();

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {

        if (firstRender)
        {

            funcModule = await js.InvokeAsync<IJSObjectReference>(
            "import", "./_content/BoatRazorLibrary/cartInfo.js");

            IsMobile = await funcModule.InvokeAsync<bool>("isDevice");
            StateHasChanged();

        }

    }

    async ValueTask IAsyncDisposable.DisposeAsync()
    {

        if (funcModule is not null)
        {
            await funcModule.DisposeAsync();
        }
    }

}
