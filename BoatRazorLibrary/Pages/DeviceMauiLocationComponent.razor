
<div class="m-auto">
    <div class="row mt-3">
        <button class="btn btn-info" @onclick="() => DeviceInfoClicked()">Device Info</button>
    </div>
    <div class="row mt-3">
        <button class="btn btn-danger" @onclick="() => instance.DriveToNewLocation()">Device Map</button>
    </div>
    <div class="row mt-3">
        <button class="btn btn-primary" @onclick="() => { CallLocation(); CallFunc(); }">Device Location</button>
    </div>
</div>
@if (isDeviceInfo)
{
    <div class="mb-2 fw-bold text-info"> App Name: <span class="text-danger"> @instance.name</span></div>
    <div class="mt-3 mb-2 fw-bold text-info"> App package: <span class="text-danger">Application Package: @instance.package</span></div>
    <div class="mb-2 fw-bold text-info"> App Version: <span class="text-danger">Application Version: @instance.version</span></div>
    <div class="mt-3 fw-bold text-info"> App Build: <span class="text-danger">Application Build: @instance.build</span></div>
}

<div class="mt-3 mb-2 fw-bold text-info"> My Location: <span class="text-danger">@instance.result.Count</span></div>
@if (instance.result.Count > 0)
{

    foreach (var item in getResult)
    {
        if (item.Key == "lat")
        {
            MyLat = item.Value;
        }
        if (item.Key == "lng")
        {
            MyLon = item.Value;
        }
    }
    <div class="mt-3 mb-2 fw-bold text-info"> My Location: <span class="text-danger">@MyLon and @MyLat</span></div>
    <div class="mt-3 mb-2 fw-bold text-info"> Permission: <span class="text-danger">@instance.Granted</span></div>
}



@code {
    DeviceSensors instance = new DeviceSensors();

    public double MyLon { get; set; } = 0.54;

    public double MyLat { get; set; } = 0.74;

    private bool isDeviceLocation { get; set; } = false;

    private bool isDeviceInfo { get; set; } = false;

    private Dictionary<string, double> getResult = new Dictionary<string, double>();

    private void CallLocation() { isDeviceLocation = !isDeviceLocation; if (isDeviceInfo) { isDeviceInfo = false; } }

    private void DeviceInfoClicked() { isDeviceInfo = !isDeviceInfo; if (isDeviceLocation) { isDeviceLocation = false; } }

    private void CallFunc()
    {
        instance.GetCurrentLocation();



    }
    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            StateHasChanged();
        }
    }
}
