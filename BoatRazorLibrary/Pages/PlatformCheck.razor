@inject IJSRuntime js
@implements IAsyncDisposable
@inject IPlatformCheck iplatformCheck


@code {

    //[Parameter]
    //public EventCallback<bool> OnDisplayChanged { get; set; }

    //[Parameter]
    //public EventCallback<bool> OnDesktopDisplayChanged { get; set; }

    private IJSObjectReference? funcModule;

    //private bool testBool;

    //public bool IsMobile
    //{
    //    get => testBool;
    //    set
    //    {
    //        testBool = value;
    //        OnDisplayChanged.InvokeAsync(value);
    //    }
    //}
    //private bool desktopBool;

    //public bool IsDesktop
    //{
    //    get => desktopBool;
    //    set
    //    {
    //        desktopBool = value;
    //        OnDesktopDisplayChanged.InvokeAsync(value);
    //    }
    //}
    protected override async Task OnInitializedAsync()
    {

        await base.OnInitializedAsync();

        funcModule = await js.InvokeAsync<IJSObjectReference>("import", "./_content/BoatRazorLibrary/cartInfo.js");

        iplatformCheck.IsMobilePlatform = await funcModule.InvokeAsync<bool>
            ("isDevice");

        iplatformCheck.IsDesktopPlatform = await funcModule.InvokeAsync<bool>
            ("isDesktop");
        iplatformCheck.IsPCheckStart = true;
        StateHasChanged();
    }

    async ValueTask IAsyncDisposable.DisposeAsync()
    {

        if (funcModule is not null)
        {
            await funcModule.DisposeAsync();
        }
    }
}
